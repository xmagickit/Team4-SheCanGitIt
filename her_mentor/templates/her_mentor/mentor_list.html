{% extends "base.html" %}

{% block title %}Find a Mentor{% endblock %}

{% block content %}
<h1 class="text-xl font-bold text-retro-dark">Find a Mentor</h1>

<!-- Mentor Search Form -->
<form method="GET" class="mt-4">
    {{ form.as_p }}
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Search</button>
</form>

<ul class="mt-4">
    {% for mentor in mentors %}
    <li class="border p-4 my-2 flex justify-between items-center">
        <div>
            <p class="font-bold">{{ mentor.user.username }}</p>
            <p>Skills: {{ mentor.skills }}</p>
            <p>Experience: {{ mentor.experience_level }}</p>

            {% with mentor.average_rating as avg_rating %}
                {% if avg_rating %}
                    <p class="text-yellow-600 text-sm mt-1">‚≠ê {{ avg_rating|floatformat:1 }} / 5</p>
                {% else %}
                    <p class="text-gray-500 text-sm mt-1">No ratings yet</p>
                {% endif %}
            {% endwith %}
        </div>
        <a href="{% url 'send_request' mentor.id %}" class="bg-green-500 text-white px-4 py-2 rounded">Request
            Mentorship</a>
    </li>
    {% empty %}
    <p class="text-red-500">No matching mentors found.</p>
    {% endfor %}
</ul>
{% endblock %}